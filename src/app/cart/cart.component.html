<app-menu></app-menu>
<div class="wrapper">
  <!-- <div class="col-lg-5" *ngFor="let cartProduct of cartProducts" [style.max-width.px]="400"></div> -->
  <!-- *ngIf="!cartProducts" -->
  <div class="container my-5 col-11 col-sm-7 justify-content-center bg-white border corner shadow-lg py-5 px-md-5" *ngIf="isLogged && cargado==false">
    <p class="h2">No tienes productos en el carrito</p>
  </div>

<div class="container my-5 col-11 col-sm-7 justify-content-center bg-white border corner shadow-lg py-5 px-md-5"
  *ngIf="!isLogged">
  <div class="container d-flex justify-content-center ">
    <p class="display-4 bold600 text-center ">Cesta</p>
    <!-- <p class="h1 font-weight-bold"> Cesta </p> -->
  </div>


  <div class="container d-flex justify-content-center mt-3">

    <div class="d-flex flex-column">
      <div class="h2  mb-3">
        <p>
          Inicia sesión para ver el carrito
        </p>
      </div>
      <div class="text-center">
        <button class="btn btn-dark corner" routerLink="/login">
          Iniciar sesión
        </button>
      </div>
    </div>

  </div>
</div>
<!--

<!-- Si ya se ha cargado, muestra el div -->
<div *ngIf="cargado==true">


  <!-- <div class="container col-lg-5   pt-2 my-5 ">
    <div class="card corner bg-white shadow d-flex flex-column p-sm-5 p-4 mx-3">

      <div class="container d-flex justify-content-center mb-3">
        <p class="h1 font-weight-bold"> Cesta </p>
      </div>

      <div class="mb-5 h2">
        <!-- Utilizamos DecimalPipe que viene integrado en Angular por defecto --
        Total: {{PrecioTotal | number:'1.2-2':'es'}} euros.
      </div>
      <div>
        <button class="btn btn-dark corner btn-block" (click)="pagar()">
          COMPRAR
        </button>
      </div>
    </div>
  </div> -->




  <div class="container d-flex justify-content-around flex-wrap pt-3 my-5 py-5">
    <!-- cartProducts es el que contiene lo que necesitamos para la vista -->
    <div class="col-lg-5" *ngFor="let cartProduct of cartProducts" [style.max-width.px]="400">

      <div class="card mb-5 cardstyle mx-0 my-0 px-4 pt-4 pb-0 corner shadow">

        <table class="table table-borderless d-inline">

          <tr>
            <td>
              <div class="mt-3">
     
                <label class="containerBox">
                  <!--  !cartProduct.livemode  -->
                  <!-- en el método boxchange, último parámetro: cartProduct.livemode  -->
                  <input type="checkbox" [(ngModel)]="cartProduct.select"   (ngModelChange)="boxChange(cartProduct.metadata.price, cartProduct.quantity, cartProduct.select)">
                  <span class="checkmark"></span>
                </label>

              </div>
            </td>
          </tr>

          <tr class="container d-flex justify-content-center">
            <a routerLink="/productos/{{cartProduct.id}}">
              <img [src]="cartProduct.images" class="img-fluid cornerlista mx-auto d-block">
            </a>
          </tr>

          <tr>
            <td>
              <div class="mt-3"> <a class="h2" routerLink="/productos/{{cartProduct.id}}">{{cartProduct.name}}</a>
              </div>
            </td>
          </tr>

          <tr>
            <td>
              <div class="listheader"> {{cartProduct.metadata.price | number:'1.2-2':'es'}} €</div>
            </td>
          </tr>

          <tr>
            <td>

              <button class=" mx-0 px-0 pointer text-dark remove" (click)="resta(cartProduct.id, cartProduct.quantity)"
                [disabled]="cartProduct.quantity<2">
                <i class="fas fa-minus-circle fa-lg"></i>
              </button>
              {{cartProduct.quantity}}

              <a class=" mx-0 px-0 pointer text-dark" (click)="suma(cartProduct.id, cartProduct.quantity)">
                <i class="fas fa-plus-circle fa-lg"></i>
              </a>

              &nbsp; &nbsp;
              <a class="mx-0 px-0 pointer text-dark" (click)="borrar(cartProduct.idDB)">
                <i class="far fa-trash-alt fa-lg"></i>
              </a>
            </td>
          </tr>

        </table>


      </div>
      <!-- </a> -->
    </div>

  </div>

</div>
<!--cierra el ngif de cargado -->



<div class="fixed-bottom bg-dark text-white border-top cornertop mx-md-5 mx-2 shadow" *ngIf="isLogged">
<div class="container">
    <div class="my-3 mx-lg-5" [style.max-width.px]="2000">

      <div class="row  ">
          <div class="col-auto mr-auto col align-self-center mt-1 ml-2">Total: <span class="bold600">{{PrecioTotal | number:'1.2-2':'es'}} €</span></div>
          <div class="col-auto col align-self-center mr-2">
            <button class="btn cta corner text-white bold600 py-2 px-4 shadow-sm" (click)="pagar()">
              COMPRAR
            </button>
          </div>

      </div>
    </div>
</div>
</div>

</div>
